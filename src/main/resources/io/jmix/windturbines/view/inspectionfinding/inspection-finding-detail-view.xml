<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<view xmlns="http://jmix.io/schema/flowui/view"
      title="msg://inspectionFindingDetailView.title"
      focusComponent="form">
    <data>
        <instance id="inspectionFindingDc"
                  class="io.jmix.windturbines.entity.inspection.InspectionFinding">
            <fetchPlan extends="_base">
                <property name="evidences" fetchPlan="_base"/>
            </fetchPlan>
            <loader/>
            <collection id="evidencesDc" property="evidences"/>
        </instance>
    </data>
    <facets>
        <dataLoadCoordinator auto="true"/>
    </facets>
    <actions>
        <action id="saveAction" type="detail_saveClose"/>
        <action id="closeAction" type="detail_close"/>
    </actions>
    <layout expand="contentTabSheet">
        <tabSheet id="contentTabSheet" width="100%">
            <tab id="formTab" label="msg://finding">
                <formLayout id="form" dataContainer="inspectionFindingDc">
                    <textField id="titleField" property="title"/>
                    <textArea id="descriptionField" height="15em" property="description"/>
                    <select id="severityField" property="severity"/>
                </formLayout>
            </tab>
            <tab id="evidencesTab" label="msg://evidences">
                <vbox width="100%">
                    <fileStorageUploadField id="upload"
                                            dropAllowed="false"
                                            acceptedFileTypes=".png,.jpg,.jpeg"
                                            maxFileSize="100000000"
                                            uploadIcon="PICTURE"
                                            clearButtonVisible="false"
                                            fileStoragePutMode="MANUAL"
                    />

                    <div id="evidencesListWrapper"/>
                </vbox>
            </tab>
        </tabSheet>

        <hbox id="detailActions">
            <button id="saveAndCloseBtn" action="saveAction"/>
            <button id="closeBtn" action="closeAction"/>
        </hbox>
    </layout>
</view>
